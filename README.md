# AWSProject

This project looked to deploy a flask app on AWS using services learnt over the last two weeks. The MVP consisted of a custom VPC, with a public subnet and two private subnets. The public subnet was to contain an EC2 running the web app, and the private subnet was to have a RDS database in it to store tables for the web app. The EC2 and RDS database were also to have their own security groups.

To do this I initially set up a neww VPC and then created the subnets. To create the public subnet, I had to use an Internet gateway (connecting it to the VPC), then modifying the route table for the public subnet to allow all inbound traffic from the internet gateway. For the private subnet, the route table was set to only allow inbound traffic from sources within the VPC. When creating the EC2 Instance, a security group was assigned to it on creation, which accepted any inbound traffic from a HTTP connection on port 80, and also an SSH connection from my IP address only. The RDS was created with a security group which accepted any connection from an EC2 in the EC2 Security Group. Also with the creation of the RDS, it was assigned to both private subnets created, as a subnet group, which are in different Availibility Zones (AZs). This is particularly good for the availability of the product as the RDS can still run should one AZ go down. 
![image](https://user-images.githubusercontent.com/88770784/135596768-f6e6d41f-f082-481e-8992-b87430b4a1b1.png)
![ec2](https://user-images.githubusercontent.com/88770784/135623693-2b4c4c26-7ad6-4263-8803-73bf62a30c4b.PNG)
![subnets](https://user-images.githubusercontent.com/88770784/135623707-89420b9a-601c-4f82-acb2-58a63116f0a2.PNG)


To improve upon the MVP of this project, there were a few things to be considered. Firstly, since the RDS is available in multiple AZs, it would make sense to also have EC2s running in each AZ as well, to improve the availaibilty of the front end (should an AZ go down). Also, if the traffic to the web app were to suddenly spike or become much greater, implementing an Auto-scaling Group and assigning it a Load Balancer would make sense. Additional layers of security are also important additions, especially considering that credentials such as the RDS URI are visible in the apps code. Finally, automating the whole deployment of the app onto AWS would be particularly beneficial for easing the amount of work needed in the future, only having to monitor the deployment rather than carry it out manually.

Firstly, to deal with the possibility of increased traffic and auto-scaling group and load balancer were created. These EC2s were assigned to two AZs, in the two subnets I had created. I could have also created a third subnet in the third AZ in the region I was working in, though given that these EC2s are not needed beyond this project, I decided it was a bit arbitrary and so didn't bother. Similarly a third private subnet could have been created and added to the RDS's subnet group to also increase the availibility, but agained seemed arbitrary. In the creation of the instances however, the packages required to run the web app were not automatically installed as a custom Amazon MAchine Image(AMI) was not created from the original EC2 before creating the ASG.
![ASG](https://user-images.githubusercontent.com/88770784/135623726-14762ed4-850b-4c65-9d14-be4b58aec09a.PNG)

Once the auto scaling group had been created, I then attempted to integrate the other stretch goals together using CloudFormation. To do this I attempted to recreate the MVP as well,in order to keep all of the creation and connectivity streamlined and from one source, however, I did not get round to finishing this. To begin with I started by once again creating the VPC and subnet groups, along with the appropriate route tables and security groups, then when attempting to create the auto-scaling group and have that invoke a Lambda function which would automatically build the app on the ec2 (which required creating a role) was where I then began to hit walls and didn't get any further.
